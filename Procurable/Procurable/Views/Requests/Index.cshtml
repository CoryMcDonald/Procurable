@model IEnumerable<Procurable.Models.Request>

@{
    ViewBag.Title = "Index";
}



@if ((bool)ViewData["powerUser"])
{
   
    @Html.Action("Approve");
}


<h2>My Requests</h2>


<p>
    @Html.ActionLink("Create New", "Create", new { }, new { @class = "btn btn-default" })
</p>

<table class="table-hover table " >
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.ID)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Comments)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.RequestedFor)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Status)
        </th>
       
        <th></th>
    </tr>

@foreach (var item in Model)
{
    var newID = item.ID * 500000;
    <tr  >
        <td data-toggle="modal" data-target="#@newID " >
            @Html.DisplayFor(modelItem => item.ID)
        </td>
        <td data-toggle="modal" data-target="#@newID " >
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td data-toggle="modal" data-target="#@newID " >
            @Html.DisplayFor(modelItem => item.Comments)
        </td>
        <td data-toggle="modal" data-target="#@newID " >
            @Html.DisplayFor(modelItem => item.RequestedFor)
        </td>
        <td data-toggle="modal" data-target="#@newID " >
            @Html.DisplayFor(modelItem => item.Status)
        </td>
        <td>

            <!--
            <button type='button' class='btn btn-xs ' onclick="window.location.href='@Url.Action("Edit", new { id=item.ID })'">
                <span class='glyphicon glyphicon-pencil' aria-hidden='true'></span>
            </button>
                -->
            <button type='button' class='btn btn-xs' onclick="window.location.href='@Url.Action("Delete", new { id=item.ID })'">
                <span class='glyphicon glyphicon-remove ' aria-hidden='true'></span>
            </button>


        </td>
        <td>
            <!-- Modal -->
            <div id="@newID" class="modal" role="dialog">
                <div class="modal-dialog">

                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">@Html.DisplayFor(modelItem => item.ID) - @Html.DisplayFor(modelItem => item.Name)</h4>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-md-12">Created: @Html.DisplayFor(modelItem => item.CreatedDate)</div>
                                <div class="col-md-12">Modified: @Html.DisplayFor(modelItem => item.LastModified)</div>
                                <div class="col-md-12">Requested By: @Html.DisplayFor(modelItem => item.RequestedBy)</div>

                            </div>
                            <hr />
                            <div class="row">
                                @Html.DisplayFor(modelItem => item.Items)
                            </div>

                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>

                </div>
            </div>
        </td>
    </tr>
    
}

</table>


<script>
    jQuery(document).ready(function ($) {
        $(".clickable-row").click(function () {
            window.document.location = $(this).data("href");
        });
    });
</script>